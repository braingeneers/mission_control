# OAuth2 Proxy Configuration
location /oauth2/ {
    proxy_pass       http://oauth2-proxy;
    proxy_set_header Host                    $host;
    proxy_set_header X-Real-IP               $remote_addr;
    proxy_set_header X-Scheme                $scheme;
    proxy_set_header X-Auth-Request-Redirect $request_uri;
    proxy_set_header X-Forwarded-Proto       $scheme;
    proxy_set_header X-Forwarded-Host        $host;
    proxy_set_header X-Forwarded-Uri         $request_uri;
    proxy_set_header X-Forwarded-Port        $server_port;
}

# Set a custom header for authentication check
proxy_set_header X-Check-Auth $host;